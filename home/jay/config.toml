# Hide Jay's built-in bar since we're using waybar
show-bar = false

# Hide window title bars
show-titles = false

# The keymap that is used for shortcuts and also sent to clients.
# This global keymap sets caps lock as ctrl modifier
keymap = """
    xkb_keymap {
        xkb_keycodes { include "evdev+aliases(qwerty)" };
        xkb_types    { include "complete"              };
        xkb_compat   { include "complete"              };
        xkb_symbols  { include "pc+us+inet(evdev)+ctrl(nocaps)" };
    };
    """

# An action that will be executed when the GPU has been initialized.
on-graphics-initialized = [
    { type = "exec", exec = "mako" },
    { type = "exec", exec = "wl-tray-bridge" },
    { type = "exec", exec = "waybar" },
]

# Per-device input configuration
# Disable the Synaptics touchpad
[[inputs]]
match.name = "SynPS/2 Synaptics TouchPad"
tap-enabled = false
# You can also completely disable it by setting this in on-graphics-initialized:
# { type = "configure-input", input = { match.name = "SynPS/2 Synaptics TouchPad", enabled = false } }

# Configure the Ergo K860 keyboard with custom keymap
[[inputs]]
match.name = "Logitech ERGO K860"
keymap = """
    xkb_keymap {
        xkb_keycodes { include "evdev+aliases(qwerty)" };
        xkb_types    { include "complete"              };
        xkb_compat   { include "complete"              };
        xkb_symbols  { include "pc+us+inet(evdev)+ctrl(nocaps)+ctrl(swap_lwin_lctl)" };
    };
    """

# Configure the TrackPoint with higher sensitivity
[[inputs]]
match.name = "TPPS/2 IBM TrackPoint"
accel-speed = 1.0

# Shortcuts that are processed by the compositor.
# The left hand side should be a key, possibly prefixed with modifiers.
# The right hand side should be an action.
[shortcuts]
# Terminal
logo-Return = { type = "exec", exec = "kitty" }

# Application launcher
logo-d = { type = "exec", exec = ["rofi", "-show", "drun", "-show-icons"] }

# Clipboard history (using rofi)
logo-y = { type = "exec", exec = ["sh", "-c", "cliphist list | rofi -dmenu | cliphist decode | wl-copy"] }

# The focus-X actions move the keyboard focus to next window on the X.
logo-Left = "focus-left"
logo-Down = "focus-down"
logo-Up = "focus-up"
logo-Right = "focus-right"
logo-h = "focus-left"
logo-j = "focus-down"
logo-k = "focus-up"
logo-l = "focus-right"

# The move-X actions move window that has the keyboard focus to the X.
logo-shift-Left = "move-left"
logo-shift-Down = "move-down"
logo-shift-Up = "move-up"
logo-shift-Right = "move-right"
logo-shift-h = "move-left"
logo-shift-j = "move-down"
logo-shift-k = "move-up"
logo-shift-l = "move-right"

# The toggle-split action changes the split direction of the current container.
logo-t = "toggle-split"

# The toggle-mono action changes whether the current container shows
# a single window or all windows next to each other.
logo-p = "toggle-mono"

# The toggle-fullscreen action toggles the current window between
# windowed and fullscreen.
logo-f = "toggle-fullscreen"

# The close action requests the currently focused window to close.
logo-shift-q = "close"

# The toggle-floating action changes the currently focused window between
# floating and tiled.
logo-v = "toggle-floating"

# The quit action terminates the compositor.
logo-shift-e = "quit"

# The reload-config-toml action reloads the TOML configuration file.
alt-shift-r = "reload-config-toml"

# The switch-to-vt action switches to a different virtual terminal.
ctrl-alt-F1 = { type = "switch-to-vt", num = 1 }
ctrl-alt-F2 = { type = "switch-to-vt", num = 2 }
ctrl-alt-F3 = { type = "switch-to-vt", num = 3 }
ctrl-alt-F4 = { type = "switch-to-vt", num = 4 }
ctrl-alt-F5 = { type = "switch-to-vt", num = 5 }
ctrl-alt-F6 = { type = "switch-to-vt", num = 6 }
ctrl-alt-F7 = { type = "switch-to-vt", num = 7 }
ctrl-alt-F8 = { type = "switch-to-vt", num = 8 }
ctrl-alt-F9 = { type = "switch-to-vt", num = 9 }
ctrl-alt-F10 = { type = "switch-to-vt", num = 10 }
ctrl-alt-F11 = { type = "switch-to-vt", num = 11 }
ctrl-alt-F12 = { type = "switch-to-vt", num = 12 }

# The show-workspace action switches to a workspace. If the workspace is not
# currently being used, it is created on the output that contains the pointer.
logo-1 = { type = "show-workspace", name = "1" }
logo-2 = { type = "show-workspace", name = "2" }
logo-3 = { type = "show-workspace", name = "3" }
logo-4 = { type = "show-workspace", name = "4" }
logo-5 = { type = "show-workspace", name = "5" }
logo-6 = { type = "show-workspace", name = "6" }
logo-7 = { type = "show-workspace", name = "7" }
logo-8 = { type = "show-workspace", name = "8" }
logo-9 = { type = "show-workspace", name = "9" }
logo-0 = { type = "show-workspace", name = "10" }

# The move-to-workspace action moves the currently focused window to a workspace.
logo-shift-1 = { type = "move-to-workspace", name = "1" }
logo-shift-2 = { type = "move-to-workspace", name = "2" }
logo-shift-3 = { type = "move-to-workspace", name = "3" }
logo-shift-4 = { type = "move-to-workspace", name = "4" }
logo-shift-5 = { type = "move-to-workspace", name = "5" }
logo-shift-6 = { type = "move-to-workspace", name = "6" }
logo-shift-7 = { type = "move-to-workspace", name = "7" }
logo-shift-8 = { type = "move-to-workspace", name = "8" }
logo-shift-9 = { type = "move-to-workspace", name = "9" }
logo-shift-0 = { type = "move-to-workspace", name = "10" }

#volume keys
XF86AudioRaiseVolume = { type = "exec", exec = ["wpctl", "set-volume", "-l", "1", "@DEFAULT_AUDIO_SINK@", "5%+"] }
XF86AudioLowerVolume = { type = "exec", exec = ["wpctl", "set-volume", "-l", "1", "@DEFAULT_AUDIO_SINK@", "5%-"] }
XF86AudioMute = { type = "exec", exec = ["wpctl", "set-mute", "@DEFAULT_AUDIO_SINK@", "toggle"] }
XF86AudioMicMute = { type = "exec", exec = ["wpctl", "set-mute", "@DEFAULT_AUDIO_SOURCE@", "toggle"] }

# play
XF86AudioPlay = { type = "exec", exec = ["playerctl", "play-pause"] }
XF86AudioPause = { type = "exec", exec = ["playerctl", "play-pause"] }
XF86AudioNext = { type = "exec", exec = ["playerctl", "next"] }
XF86AudioPrev = { type = "exec", exec = ["playerctl", "previous"] }

# Printscreen
logo-Print = { type = "exec", exec = ["/home/arthur/.config/jay/screenshot.sh"] }
logo-shift-Print = { type = "exec", exec = ["/home/arthur/.config/jay/screenshot.sh", "area"] }

#TODO idle
idle.minutes = 10
on-idle = { type = "exec", exec = { prog = "swaylock", privileged = true } }

#[status]
#format = "i3bar"
#exec = ["i3status-rs" "/home/arthur/.config/i3status-rust/config.toml" ]

[[clients]]
matches.name = "grim"
capabilities = "all" # todo more finegrained

[[clients]]
matches.name = "waybar"
capabilities = "all" # todo more finegrained

[theme]
bg-color = "#000000"
focused-title-bg-color = "#00ff00"
focused-title-text-color = "#00ff00"
highlight-color = "#00ff00"
border-color = "#00ff00"
separator-color = "#00ff00"
attention-requested-bg-color = "#00ff00"
